- name: ðŸ”‘ Thiáº¿t láº­p KhÃ³a XÃ¡c thá»±c vÃ  táº¡o .env
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          GOOGLE_SHEET_ID: ${{ secrets.GOOGLE_SHEET_ID }}
          # Biáº¿n mÃ´i trÆ°á»ng Ä‘á»ƒ sá»­ dá»¥ng ná»™i dung JSON thÃ´
          SERVICE_ACCOUNT_CONTENT: ${{ secrets.GOOGLE_SERVICE_ACCOUNT_JSON_CONTENT }} 
          YOUTUBE_CLIENT_SECRET_B64: ${{ secrets.YOUTUBE_CLIENT_SECRET_B64 }}
          YOUTUBE_TOKEN_PICKLE_B64: ${{ secrets.YOUTUBE_TOKEN_PICKLE_B64 }}

        run: |
          # 1. Ghi ná»™i dung JSON Service Account (Ná»™i dung thÃ´)
          # CHá»ˆ Sá»¬ Dá»¤NG Lá»†NH ECHO Äá»‚ GHI Ná»˜I DUNG THÃ”
          echo "$SERVICE_ACCOUNT_CONTENT" > service-account.json
          
          # 2. Giáº£i mÃ£ YouTube client_secrets.json (DÃ™NG BASE64)
          echo "${{ secrets.YOUTUBE_CLIENT_SECRET_B64 }}" | base64 --decode > client_secrets.json
          
          # 3. Giáº£i mÃ£ YouTube token.pickle (DÃ™NG BASE64)
          echo "${{ secrets.YOUTUBE_TOKEN_PICKLE_B64 }}" | base64 --decode > token.pickle
          
          # Táº O FILE .ENV Cá»¤C Bá»˜
          echo "OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}" > .env
          echo "GOOGLE_SHEET_ID=${{ secrets.GOOGLE_SHEET_ID }}" >> .env
          echo "GOOGLE_SERVICE_ACCOUNT_JSON=service-account.json" >> .env
